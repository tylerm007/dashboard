// Copy this text, paste to https://dbdiagram.io/d
// Or, https://databasediagram.com/app
// Or, view in VSCode with extension: "DBML Live Preview"

Table LaneDefinition {
    LaneId CHAR(32) [primary key]
    ProcessId CHAR(32) 
    LaneName VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    LaneDescription VARCHAR(500) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    EstimatedDurationDays INTEGER 
    CreatedDate DATETIME2 
    CreatedBy VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ModifiedDate DATETIME2 
    ModifiedBy VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table ProcessDefinition {
    ProcessId CHAR(32) [primary key]
    ProcessName VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ProcessVersion VARCHAR(10) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Description VARCHAR(500) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    IsActive BOOLEAN 
    CreatedDate DATETIME2 
    CreatedBy VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ModifiedDate DATETIME2 
    ModifiedBy VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table ProcessInstance {
    InstanceId CHAR(32) [primary key]
    ProcessId CHAR(32) 
    ApplicationId VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Status VARCHAR(10) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CurrentTaskId CHAR(32) 
    StartedDate DATETIME2 
    StartedBy VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CompletedDate DATETIME2 
    CompletedBy VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Priority VARCHAR(10) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ContextData VARCHAR COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table TaskDefinition {
    TaskId CHAR(32) [primary key]
    ProcessId CHAR(32) 
    TaskName VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    TaskType VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    TaskCategory VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Sequence INTEGER 
    IsParallel BOOLEAN 
    AssigneeRole VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    EstimatedDurationMinutes INTEGER 
    IsRequired BOOLEAN 
    AutoComplete BOOLEAN 
    Description VARCHAR(500) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ConfigurationJson VARCHAR COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table ProcessPriority {
    PriorityCode VARCHAR(10) COLLATE "SQL_Latin1_General_CP1_CI_AS" [primary key]
    PriorityDescription VARCHAR(255) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table ProcessStatus {
    StatusCode VARCHAR(10) COLLATE "SQL_Latin1_General_CP1_CI_AS" [primary key]
    StatusDescription VARCHAR(255) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table ProcessMessage {
    MessageId CHAR(32) [primary key]
    InstanceId CHAR(32) 
    FromUser VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ToUser VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ToRole VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    MessageType VARCHAR(20) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Subject VARCHAR(200) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    MessageBody VARCHAR COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    SentDate DATETIME2 
    ReadDate DATETIME2 
    IsRead BOOLEAN 
    }

Table ProcessMessageType {
    MessageTypeCode VARCHAR(20) COLLATE "SQL_Latin1_General_CP1_CI_AS" [primary key]
    MessageTypeDescription VARCHAR(255) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table StageInstance {
    StageInstanceId CHAR(32) [primary key]
    ProcessInstanceId CHAR(32) 
    LaneId CHAR(32) 
    Status VARCHAR(20) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    StartedDate DATETIME2 
    CompletedDate DATETIME2 
    DurationDays INTEGER 
    RetryCount INTEGER 
    CompletedCount INTEGER 
    TotalCount INTEGER 
    CreatedDate DATETIME2 
    CreatedBy VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ModifiedDate DATETIME2 
    ModifiedBy VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table StageStatus {
    StatusCode VARCHAR(20) COLLATE "SQL_Latin1_General_CP1_CI_AS" [primary key]
    StatusDescription VARCHAR(255) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table Sysdiagram {
    name NULL 
    principal_id INTEGER 
    diagram_id INTEGER [primary key]
    version INTEGER 
    definition BLOB 
    }

Table TaskComment {
    CommentId CHAR(32) [primary key]
    InstanceId CHAR(32) 
    TaskInstanceId CHAR(32) 
    CommentType VARCHAR(10) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CommentText VARCHAR COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Author VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CreatedDate DATETIME2 
    IsVisible BOOLEAN 
    }

Table TaskCommentType {
    CommentTypeCode VARCHAR(10) COLLATE "SQL_Latin1_General_CP1_CI_AS" [primary key]
    CommentTypeDescription VARCHAR(255) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table TaskInstance {
    TaskInstanceId CHAR(32) [primary key]
    InstanceId CHAR(32) 
    TaskId CHAR(32) 
    Status VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    AssignedTo VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    StartedDate DATETIME2 
    CompletedDate DATETIME2 
    DurationMinutes INTEGER 
    Result VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ResultData VARCHAR COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ErrorMessage VARCHAR(1000) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    RetryCount INTEGER 
    }

Table TaskFlow {
    FlowId CHAR(32) [primary key]
    FromTaskId CHAR(32) 
    ToTaskId CHAR(32) 
    Condition VARCHAR(500) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    IsDefault BOOLEAN 
    }

Table ValidationResult {
    ValidationResultId CHAR(32) [primary key]
    InstanceId CHAR(32) 
    ValidationId CHAR(32) 
    TaskInstanceId CHAR(32) 
    IsValid BOOLEAN 
    ValidationMessage VARCHAR(500) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ValidationDate DATETIME2 
    ValidatedBy VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table ValidationRule {
    ValidationId CHAR(32) [primary key]
    ValidationName VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Category VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    RuleType VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ValidationQuery VARCHAR COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ErrorMessage VARCHAR(500) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    IsActive BOOLEAN 
    CreatedDate DATETIME2 
    }

Table WFActivityLog {
    ActivityID INTEGER [primary key]
    ApplicationID INTEGER 
    ActionType VARCHAR(200) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ActionDetails VARCHAR COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    UserName VARCHAR(200) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ActivityType VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Status VARCHAR(5) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Category VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ActivityDate DATETIME2 
    }

Table WFApplication {
    ApplicationID INTEGER [primary key]
    ApplicationNumber VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CompanyID INTEGER 
    PlantID INTEGER 
    SubmissionDate DATE 
    Status VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Priority VARCHAR(20) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    PrimaryContactName VARCHAR(200) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Version VARCHAR(20) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CreatedDate DATETIME2 
    LastUpdatedDate DATETIME2 
    LastStatusChangeDate DATETIME2 
    LastStatusChangedBy VARCHAR(200) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    WFDashboardID INTEGER 
    }

Table WFActivityStatus {
    StatusCode VARCHAR(5) COLLATE "SQL_Latin1_General_CP1_CI_AS" [primary key]
    StatusDesc VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table WFPriority {
    PriorityCode VARCHAR(20) COLLATE "SQL_Latin1_General_CP1_CI_AS" [primary key]
    PriorityDescription VARCHAR(255) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table WFApplicationStatus {
    StatusCode VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" [primary key]
    StatusDescription VARCHAR(255) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table WFDashboard {
    ID INTEGER [primary key]
    count_new INTEGER 
    count_in_progress INTEGER 
    count_withdrawn INTEGER 
    count_completed INTEGER 
    count_overdue INTEGER 
    total_count INTEGER 
    }

Table WFApplicationComment {
    CommentID INTEGER [primary key]
    ApplicationID INTEGER 
    Author VARCHAR(200) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CommentText VARCHAR COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CommentType VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Category VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CreatedDate DATETIME2 
    }

Table WFApplicationMessage {
    MessageID INTEGER [primary key]
    ApplicationID INTEGER 
    FromUser VARCHAR(200) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ToUser VARCHAR(200) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    MessageText VARCHAR COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    MessageType VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Priority VARCHAR(20) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    SentDate DATETIME2 
    }

Table WFCompany {
    CompanyID INTEGER [primary key]
    ApplicationID INTEGER 
    KashrusCompanyID VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CreatedDate DATETIME2 
    }

Table WFContact {
    ContactID INTEGER [primary key]
    ApplicationID INTEGER 
    CreatedDate DATETIME2 
    }

Table WFFile {
    FileID INTEGER [primary key]
    ApplicationID INTEGER 
    FileName VARCHAR(500) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    FileType VARCHAR(5) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    FileSize VARCHAR(20) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    UploadedDate DATE 
    Tag VARCHAR(200) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    IsProcessed BOOLEAN 
    RecordCount INTEGER 
    FilePath VARCHAR(1000) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CreatedDate DATETIME2 
    }

Table WFFileType {
    FileType VARCHAR(5) COLLATE "SQL_Latin1_General_CP1_CI_AS" [primary key]
    FileTypeName VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table WFIngredient {
    IngredientID INTEGER [primary key]
    ApplicationID INTEGER 
    ProductID INTEGER 
    NCRCIngredientID VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table WFProduct {
    ProductID INTEGER [primary key]
    ApplicationID INTEGER 
    PlantID INTEGER 
    ProductNumber VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CreatedDate DATETIME2 
    }

Table WFPlant {
    PlantID INTEGER [primary key]
    ApplicationID INTEGER 
    PlantNumber VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CreatedDate DATETIME2 
    }

Table WFQuote {
    QuoteID INTEGER [primary key]
    ApplicationID INTEGER 
    QuoteNumber VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    TotalAmount DECIMAL 
    ValidUntil DATE 
    Status VARCHAR(10) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    LastUpdatedDate DATE 
    CreatedDate DATETIME2 
    }

Table WFQuoteStatus {
    StatusCode VARCHAR(10) COLLATE "SQL_Latin1_General_CP1_CI_AS" [primary key]
    StatusDesc VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }

Table WFQuoteItem {
    QuoteItemID INTEGER [primary key]
    QuoteID INTEGER 
    Description VARCHAR(500) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Amount DECIMAL 
    SortOrder INTEGER 
    }

Table WFRole {
    UserRole VARCHAR(10) COLLATE "SQL_Latin1_General_CP1_CI_AS" [primary key]
    Role VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    CreatedDate DATETIME2 
    }

Table WFUser {
    UserID INTEGER [primary key]
    Username VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    FullName VARCHAR(200) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Email VARCHAR(255) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Role VARCHAR(10) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    IsActive BOOLEAN 
    CreatedDate DATETIME2 
    LastLoginDate DATETIME2 
    }

Table WorkflowHistory {
    HistoryId CHAR(32) [primary key]
    InstanceId CHAR(32) 
    TaskInstanceId CHAR(32) 
    Action VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    PreviousStatus VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    NewStatus VARCHAR(50) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ActionBy VARCHAR(100) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    ActionDate DATETIME2 
    ActionReason VARCHAR(500) COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    Details VARCHAR COLLATE "SQL_Latin1_General_CP1_CI_AS" 
    }



// Relationships
    Ref: LaneDefinition.(ProcessId) < ProcessDefinition.(ProcessId)
    Ref: ProcessInstance.(CurrentTaskId) < TaskDefinition.(TaskId)
    Ref: ProcessInstance.(Priority) < ProcessPriority.(PriorityCode)
    Ref: ProcessInstance.(ProcessId) < ProcessDefinition.(ProcessId)
    Ref: ProcessInstance.(Status) < ProcessStatus.(StatusCode)
    Ref: TaskDefinition.(ProcessId) < ProcessDefinition.(ProcessId)
    Ref: ProcessMessage.(InstanceId) < ProcessInstance.(InstanceId)
    Ref: ProcessMessage.(MessageType) < ProcessMessageType.(MessageTypeCode)
    Ref: StageInstance.(LaneId) < LaneDefinition.(LaneId)
    Ref: StageInstance.(ProcessInstanceId) < ProcessInstance.(InstanceId)
    Ref: StageInstance.(Status) < StageStatus.(StatusCode)
    Ref: TaskComment.(CommentType) < TaskCommentType.(CommentTypeCode)
    Ref: TaskComment.(InstanceId) < ProcessInstance.(InstanceId)
    Ref: TaskComment.(TaskInstanceId) < TaskInstance.(TaskInstanceId)
    Ref: TaskInstance.(InstanceId) < ProcessInstance.(InstanceId)
    Ref: TaskInstance.(TaskId) < TaskDefinition.(TaskId)
    Ref: TaskFlow.(FromTaskId) < TaskDefinition.(TaskId)
    Ref: TaskFlow.(ToTaskId) < TaskDefinition.(TaskId)
    Ref: ValidationResult.(InstanceId) < ProcessInstance.(InstanceId)
    Ref: ValidationResult.(TaskInstanceId) < TaskInstance.(TaskInstanceId)
    Ref: ValidationResult.(ValidationId) < ValidationRule.(ValidationId)
    Ref: WFActivityLog.(ApplicationID) < WFApplication.(ApplicationID)
    Ref: WFActivityLog.(Status) < WFActivityStatus.(StatusCode)
    Ref: WFApplication.(Priority) < WFPriority.(PriorityCode)
    Ref: WFApplication.(Status) < WFApplicationStatus.(StatusCode)
    Ref: WFApplication.(WFDashboardID) < WFDashboard.(ID)
    Ref: WFApplicationComment.(ApplicationID) < WFApplication.(ApplicationID)
    Ref: WFApplicationMessage.(ApplicationID) < WFApplication.(ApplicationID)
    Ref: WFCompany.(ApplicationID) < WFApplication.(ApplicationID)
    Ref: WFContact.(ApplicationID) < WFApplication.(ApplicationID)
    Ref: WFFile.(ApplicationID) < WFApplication.(ApplicationID)
    Ref: WFFile.(FileType) < WFFileType.(FileType)
    Ref: WFIngredient.(ApplicationID) < WFApplication.(ApplicationID)
    Ref: WFIngredient.(ProductID) < WFProduct.(ProductID)
    Ref: WFProduct.(ApplicationID) < WFApplication.(ApplicationID)
    Ref: WFProduct.(PlantID) < WFPlant.(PlantID)
    Ref: WFPlant.(ApplicationID) < WFApplication.(ApplicationID)
    Ref: WFQuote.(ApplicationID) < WFApplication.(ApplicationID)
    Ref: WFQuote.(Status) < WFQuoteStatus.(StatusCode)
    Ref: WFQuoteItem.(QuoteID) < WFQuote.(QuoteID)
    Ref: WFUser.(Role) < WFRole.(UserRole)
    Ref: WorkflowHistory.(InstanceId) < ProcessInstance.(InstanceId)
    Ref: WorkflowHistory.(TaskInstanceId) < TaskInstance.(TaskInstanceId)
